<div *ngIf="hasPermission" class="flex flex-col rounded-md shadow-default h-full min-h-100">
    <div class="flex items-center justify-between bg-gray-100 rounded-tl-md rounded-tr-md px-6 py-2">
        <div class="flex items-center">
            <img class="w-5 text-blue-900" src="assets/icons/bank-statement.svg" alt="">
            <span class="text-blue-900 font-bold pl-4">Boleto do mês</span>
        </div>
        <div>
            <span [routerLink]="'/boletos'" (click)="appService.registerTracking('Dashboard', 'Ver mais', {card: 'Boleto'})" class="text-blue-500 text-sm font-bold cursor-pointer">Ver mais</span>
        </div>
    </div>

    <ng-container *ngIf="!loading">
        <div *ngIf="boletos && boletos.length" class="relative h-full p-2">

            <div class="absolute left-10 flex items-center justify-center h-56">
                <button *ngIf="index > 0" (click)="previous()" mat-icon-button class="">
                    <mat-icon class="icon-size-5 text-blue-900" [svgIcon]="'awesome_solid:angle-left'"></mat-icon>
                </button>
            </div>

            <div class="absolute right-10 flex items-center justify-center h-56">
                <button *ngIf="index < boletos.length - 1" (click)="next()" mat-icon-button class="">
                    <mat-icon class="icon-size-5 text-blue-900" [svgIcon]="'awesome_solid:angle-right'"></mat-icon>
                </button>
            </div>

            <div class="flex flex-col items-center justify-start h-full">
                <div class="flex flex-col items-center justify-center w-full min-h-70 px-6">
                    <span class="text-blue-900 font-medium text-2xl uppercase">{{boletos[index]['dueDate'] | date: 'MMMM'}}</span>
                    <div class="text-blue-900 font-medium">{{boletos[index].complementoUnidade}}</div>
                    <div
                        class="border border-3 rounded-full font-semibold text-md px-8 uppercase my-2 py-2 max-w-max"
                        [ngClass]="boletos[index]?.status === 'Baixado' ? 'border-green-600 text-green-600' : 'border-default text-default'">
                        {{boletos[index]?.status === 'Baixado' ? 'Pago' : 'Em Aberto'}}
                    </div>
                    <span class="text-blue-900 text-base font-semibold">Dia {{boletos[index]['dueDate'] | date: 'dd/MM/yy'}}</span>
                    <span class="text-blue-900 text-3xl font-bold mt-2">{{boletos[index]?.valorRecibo | currencyBRL}}</span>
                </div>
                <div class="flex items-center justify-around bg-blue-50 rounded-md w-full py-3">
                    <div *ngIf="boletos[index]?.status === 'Emitido'" [cdkCopyToClipboard]="boletos[index].linhaDigitavel" (cdkCopyToClipboardCopied)="boletoComponent.copyBarcode()" class="flex flex-col justify-center items-center cursor-pointer text-default text-center">
                        <img class="w-4 pb-1" src="assets/icons/boletos/barcode.svg" alt="">
                        <span class="text-sm font-bold">Copiar</span>
                    </div>
                    <div (click)="boletoComponent.goToEmail(boletos[index])" class="flex flex-col justify-center items-center cursor-pointer text-default text-center">
                        <img class="w-4 pb-1" src="assets/icons/boletos/email.svg" alt="">
                        <span class="text-sm font-bold">Email</span>
                    </div>
                    <div (click)="boletoComponent.download(boletos[index])" class="flex flex-col justify-center items-center cursor-pointer text-default text-center">
                        <img class="w-3 pb-1" src="assets/icons/boletos/download.svg" alt="">
                        <span class="text-sm font-bold">{{boletoComponent.downloding === boletos[index].numeroRecibo ? 'Baixando...' : 'Download'}}</span>
                    </div>
                    <div (click)="boletoComponent.goToDetails(boletos[index])" class="flex flex-col justify-center items-center cursor-pointer text-default text-center">
                        <img class="w-4 pb-1" src="assets/icons/boletos/detail.svg" alt="">
                        <span class="text-sm font-bold">Detalhes</span>
                    </div>
<!--                    <div *ngIf="boletos[index]?.status === 'Emitido'" (click)="boletoComponent.goToLinkVP()" class="flex flex-col justify-center items-center cursor-pointer text-default text-center">-->
<!--                        <img class="w-6 pb-1" src="assets/icons/boletos/card.svg" alt="">-->
<!--                        <span class="text-sm font-bold">Parcelar</span>-->
<!--                    </div>-->
                </div>
            </div>
        </div>

        <div class="w-full h-full flex items-center justify-center text-gray-500 text-sm" *ngIf="!boletos">Nenhum boleto encontrado.</div>

    </ng-container>

    <ng-container *ngIf="loading">

        <div class="flex flex-col items-center justify-center h-full p-2">
            <div class="flex flex-col flex-auto items-center justify-center min-h-60 w-full px-6">
                <span class="bg-gray-200 h-6 rounded w-1/3"></span>
                <span class="bg-gray-200 h-9 rounded-full w-1/3 my-2"></span>
                <span class="bg-gray-200 h-6 rounded w-1/3"></span>
                <span class="bg-gray-200 h-7 rounded w-1/3 mt-2"></span>
            </div>
            <div class="flex items-center justify-around bg-blue-50 rounded-md w-full py-2">
                <div class="flex flex-col justify-center w-1/5 items-center cursor-pointer text-default text-center">
                    <span class="bg-gray-300 h-6 w-6 rounded"></span>
                    <span class="bg-gray-300 h-4 w-7/12 rounded mt-1"></span>
                </div>
                <div class="flex flex-col justify-center w-1/5 items-center cursor-pointer text-default text-center">
                    <span class="bg-gray-300 h-6 w-6 rounded"></span>
                    <span class="bg-gray-300 h-4 w-7/12 rounded mt-1"></span>
                </div>
                <div class="flex flex-col justify-center w-1/5 items-center cursor-pointer text-default text-center">
                    <span class="bg-gray-300 h-6 w-6 rounded"></span>
                    <span class="bg-gray-300 h-4 w-7/12 rounded mt-1"></span>
                </div>
                <div class="flex flex-col justify-center w-1/5 items-center cursor-pointer text-default text-center">
                    <span class="bg-gray-300 h-6 w-6 rounded"></span>
                    <span class="bg-gray-300 h-4 w-7/12 rounded mt-1"></span>
                </div>
                <div class="flex flex-col justify-center w-1/5 items-center cursor-pointer text-default text-center">
                    <span class="bg-gray-300 h-6 w-6 rounded"></span>
                    <span class="bg-gray-300 h-4 w-7/12 rounded mt-1"></span>
                </div>
            </div>
        </div>

    </ng-container>
</div>

<div *ngIf="!hasPermission" class="bg-white flex flex-col w-full h-full shadow-default rounded-md min-h-100">
    <div class="flex items-center justify-between bg-gray-100 rounded-tl-md rounded-tr-md px-6 py-2">
        <div class="flex items-center">
            <img class="w-5 text-blue-900" src="assets/icons/bank-statement.svg" alt="">
            <span class="text-blue-900 font-bold pl-4">Boleto do mês</span>
        </div>
    </div>

    <div class="flex items-center justify-center w-full h-full">
        <span class="text-gray-500 text-sm">Você não possui permissão para acessar essa funcionalidade!</span>
    </div>
</div>
